<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>

	<title>Cadastrar_Itens_de_Série_de_Carro</title>
</h:head>
<body>
<f:view >
		<h:form id="form" prependId="false">

			<fieldset>
				<p:panel id="panel" header="DistCar - Item Série"
					style="margin-bottom:10px;">

					<h:panelGrid columns="4">

						<h:outputLabel for="descricao" value="Descricão: *" />
						<p:inputText id="descricao"
							value="#{itemSerieBean.itemSerieCarro.descricao}" required="true"
							label="Descricão" requiredMessage="Nome obrigatório: *" />
						<p:message for="descricao" />

						<br></br>
						<h:outputLabel for="valor" value="Valor: *" />
						<p:inputText id="valor"
							converterMessage="Digite um número decimal no formato 999.00"
							value="#{itemSerieBean.itemSerieCarro.valorItemSerie}"
							requerid="true" label="Valor" />
						<p:message for="valor" />

						<br></br>
						<h:outputLabel for="modelo" value="Modelo: *" />
						<h:selectOneMenu id="modelo"
							value="#{itemSerieBean.codigoSelecionado}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione o Modelo" />
							<f:selectItems value="#{itemSerieBean.modeloCarros}" var="vm"
								itemLabel="#{vm.descricao} #{vm.ano}" itemValue="#{vm.codigo}" />
						</h:selectOneMenu>
						<p:message for="modelo" />
						<br></br>
						<b><i>#{itemSerieBean.mensagem}</i></b>
						
					</h:panelGrid>
					<p:commandButton update="panel" value="Salvar"
						actionListener="#{itemSerieBean.salvar}" />
					<p:commandButton update="panel" value="Excluir"
						actionListener="#{itemSerieBean.salvarAjax}" />
					<p:commandButton  value="Listar"
						actionListener="#{itemSerieBean.listarItens}" />
				</p:panel>
			</fieldset>
			        </h:form>
<h:form id="Tabela">
			<p:dataTable id="tabelaItens" var="item"
				value="#{itemSerieBean.listaItens}" paginator="true" rows="10"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="5,10,15">
				<f:facet name="header">
            Itens de Séries
        </f:facet>

				<p:column width="3" style="text-align: center;">
					<f:facet name="header">
						<h:outputText value="Codigo" />
					</f:facet>
					<h:outputText value="#{item.codigo}" />
				</p:column>

				<p:column width="8" style="text-align: center;">
					<f:facet name="header">
						<h:outputText value="Descrição" />
					</f:facet>
					<h:outputText value="#{item.descricao}" />
				</p:column>

				<p:column width="8" style="text-align: center;">
					<f:facet name="header">
						<h:outputText value="Modelo" />
					</f:facet>
					<h:outputText value="#{item.modeloCarro.descricao} #{item.modeloCarro.ano}" />
				</p:column>

				<p:column width="5" style="text-align: center;">
					<f:facet name="header">
						<h:outputText value="Valor" />
					</f:facet>
					<h:outputText value="#{item.valorItemSerie}" />
				</p:column>

				<p:column width="5" style="text-align: center;">
					<f:facet name="header">
						<h:outputText value="Situação" />
					</f:facet>
					<h:outputText value="#{item.situacao}" />
				</p:column>

				<p:column width="5" style="text-align: center;">
					<f:facet name="header">
						<h:outputText value="Data da Atualização" />
					</f:facet>
					<h:outputText value="#{item.dataUltimaAtualizacao.time}">
						<f:convertDateTime pattern="dd/MM/yyyy HH:MM"></f:convertDateTime>
					</h:outputText>

				</p:column>

			</p:dataTable>
		</h:form>
		</f:view>
</body>
</html>